<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReadyNurse - RN Gaming Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2D3748;
            --primary-light: #4A5568;
            --secondary: #38A169;
            --secondary-light: #48BB78;
            --accent: #ED8936;
            --accent-light: #F6AD55;
            --surface: #F7FAFC;
            --surface-elevated: #FFFFFF;
            --surface-accent: #EDF2F7;
            --text-primary: #1A202C;
            --text-secondary: #4A5568;
            --text-muted: #718096;
            --border: #E2E8F0;
            --border-focus: #CBD5E0;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-lg: rgba(0, 0, 0, 0.15);
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-warm: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        /* ... (All previous CSS is unchanged; for brevity, not repeated here) ... */
        /* Insert all your previous CSS code here as in your provided file */
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">ReadyNurse</div>
            <div class="tagline">RN Gaming Hub - Learn, Play, Excel</div>
        </div>
    </header>

    <main class="main-content">
        <!-- Home Screen -->
        <div id="home-screen">
            <section class="welcome-section">
                <h1>Welcome to ReadyNurse</h1>
                <p>Master nursing skills through interactive games designed for RNs, students, and professionals. Challenge yourself, track your progress, and have fun while learning! (By a bored nursing student)</p>
            </section>

            <!-- Progress Overview -->
            <div class="progress-overview" id="progress-overview">
                <div class="progress-card">
                    <div class="progress-icon">üìà</div>
                    <div class="progress-value" id="total-score">0</div>
                    <div class="progress-label">Total Score</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">üéØ</div>
                    <div class="progress-value" id="total-games">0</div>
                    <div class="progress-label">Games Played</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">üî•</div>
                    <div class="progress-value" id="best-streak">0</div>
                    <div class="progress-label">Best Streak</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">üèÜ</div>
                    <div class="progress-value" id="achievements-count">0</div>
                    <div class="progress-label">Achievements</div>
                </div>
            </div>

            <div class="games-grid">
                <div class="game-card" onclick="startVitalsGame()">
                    <div class="game-icon">ü©∫</div>
                    <h3 class="game-title">Vital Signs Detective</h3>
                    <p class="game-description">Analyze patient vital signs and identify normal vs abnormal readings. Test your clinical assessment skills!</p>
                    <div class="game-progress">
                        <span>Beginner: <span id="beginner-progress">0/4</span></span>
                        <span>Intermediate: <span id="intermediate-progress">0/3</span></span>
                        <span>Expert: <span id="expert-progress">0/2</span></span>
                    </div>
                    <button class="play-button">Play Now</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">üíä</div>
                    <h3 class="game-title">Medication Math Challenge</h3>
                    <p class="game-description">Master dosage calculations and medication administration. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">ü´Ä</div>
                    <h3 class="game-title">Anatomy Quick Match</h3>
                    <p class="game-description">Match anatomical terms with their definitions and locations. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">üöë</div>
                    <h3 class="game-title">Emergency Triage</h3>
                    <p class="game-description">Practice patient prioritization in emergency situations. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>
            </div>
        </div>

        <!-- Game Interface -->
        <div id="game-interface" class="game-interface">
            <button class="back-button" onclick="backToHome()">‚Üê Back to Games</button>
            
            <div id="difficulty-selection">
                <h2>Choose Your Challenge Level</h2>
                <p>Select the difficulty that matches your experience level</p>
                <div class="difficulty-buttons">
                    <button class="difficulty-btn beginner" onclick="selectDifficulty('beginner')">
                        üå± Beginner<br><small>Basic vital signs (<span id="beginner-completion">0/4</span> completed)</small>
                    </button>
                    <button class="difficulty-btn intermediate" onclick="selectDifficulty('intermediate')">
                        üéØ Intermediate<br><small>Clinical scenarios (<span id="intermediate-completion">0/3</span> completed)</small>
                    </button>
                    <button class="difficulty-btn expert" onclick="selectDifficulty('expert')">
                        üî• Expert<br><small>Complex cases (<span id="expert-completion">0/2</span> completed)</small>
                    </button>
                </div>
            </div>

            <div id="game-content" style="display: none;">
                <div class="game-stats">
                    <div class="stat">
                        <div class="stat-value" id="score">0</div>
                        <div class="stat-label">Score</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="streak">0</div>
                        <div class="stat-label">Streak</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="question-num">1</div>
                        <div class="stat-label">Question</div>
                    </div>
                </div>

                <div class="question-container">
                    <div class="patient-info">
                        <h3>Patient Assessment</h3>
                        <p id="patient-description">Loading patient information...</p>
                    </div>

                    <div class="vital-signs" id="vital-signs">
                        <!-- Vital signs will be loaded here -->
                    </div>

                    <h4 style="margin-bottom: 2rem; text-align: center; font-size: 1.3rem; font-weight: 600;">What is your assessment?</h4>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('normal')">
                            ‚úÖ Normal Vital Signs<br>
                            <small>Within expected ranges</small>
                        </button>
                        <button class="answer-btn" onclick="selectAnswer('abnormal')">
                            ‚ö†Ô∏è Abnormal Vital Signs<br>
                            <small>Requires attention</small>
                        </button>
                    </div>

                    <div class="explanation" id="explanation">
                        <!-- Explanation will appear here -->
                    </div>
                    <button class="next-question" id="next-btn" onclick="nextQuestion()">Next Question</button>
                </div>
            </div>
        </div>

        <!-- Achievement Toast -->
        <div id="achievement-toast" class="achievement-toast">
            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üèÜ</div>
            <div id="achievement-text">Achievement Unlocked!</div>
        </div>
    </main>

    <script>
        // Enhanced progress tracking system
        let gameState = {
            score: 0,
            streak: 0,
            currentQuestion: 0,
            selectedDifficulty: '',
            currentCorrectAnswer: ''
        };

        // Progress tracking in localStorage
        const ProgressTracker = {
            get data() {
                const saved = localStorage.getItem('readynurse-progress');
                return saved ? JSON.parse(saved) : {
                    totalScore: 0,
                    totalGames: 0,
                    bestStreak: 0,
                    achievements: [],
                    completedQuestions: {
                        beginner: [],
                        intermediate: [],
                        expert: []
                    },
                    difficultyStats: {
                        beginner: { played: 0, correct: 0, streak: 0 },
                        intermediate: { played: 0, correct: 0, streak: 0 },
                        expert: { played: 0, correct: 0, streak: 0 }
                    }
                };
            },
            save(data) {
                localStorage.setItem('readynurse-progress', JSON.stringify(data));
            },
            update(cb) {
                const data = this.data;
                cb(data);
                this.save(data);
            }
        };

        // Example questions for each difficulty
        const questions = {
            beginner: [
                {
                    id: 1,
                    patient: "A 22-year-old female presents for a routine check-up.",
                    vitals: { "Temperature": "98.6¬∞F", "Heart Rate": "72", "Respiratory Rate": "16", "Blood Pressure": "118/76", "O2 Sat": "98%" },
                    correct: "normal",
                    explanation: "All vital signs are within expected adult ranges."
                },
                {
                    id: 2,
                    patient: "A 40-year-old male after jogging, feels well.",
                    vitals: { "Temperature": "99.0¬∞F", "Heart Rate": "85", "Respiratory Rate": "18", "Blood Pressure": "120/80", "O2 Sat": "97%" },
                    correct: "normal",
                    explanation: "These are normal vital signs for a healthy adult, even after light exercise."
                },
                {
                    id: 3,
                    patient: "A 65-year-old woman with a history of hypertension.",
                    vitals: { "Temperature": "98.2¬∞F", "Heart Rate": "78", "Respiratory Rate": "16", "Blood Pressure": "155/95", "O2 Sat": "96%" },
                    correct: "abnormal",
                    explanation: "Blood pressure is elevated (hypertension stage 2)."
                },
                {
                    id: 4,
                    patient: "A 10-year-old child, appears tired.",
                    vitals: { "Temperature": "101.2¬∞F", "Heart Rate": "110", "Respiratory Rate": "22", "Blood Pressure": "104/66", "O2 Sat": "97%" },
                    correct: "abnormal",
                    explanation: "Fever and elevated heart rate for age indicate abnormal findings."
                }
            ],
            intermediate: [
                {
                    id: 1,
                    patient: "A 72-year-old male, post-op day 1, c/o shortness of breath.",
                    vitals: { "Temperature": "99.8¬∞F", "Heart Rate": "105", "Respiratory Rate": "24", "Blood Pressure": "128/86", "O2 Sat": "90%" },
                    correct: "abnormal",
                    explanation: "Low O2 saturation and tachypnea are concerning post-op findings."
                },
                {
                    id: 2,
                    patient: "A 55-year-old female with diabetes, routine visit.",
                    vitals: { "Temperature": "98.9¬∞F", "Heart Rate": "70", "Respiratory Rate": "16", "Blood Pressure": "132/84", "O2 Sat": "98%" },
                    correct: "normal",
                    explanation: "All vital signs are stable; BP is slightly elevated but not critical."
                },
                {
                    id: 3,
                    patient: "A 31-year-old pregnant woman, 28 weeks gestation.",
                    vitals: { "Temperature": "99.1¬∞F", "Heart Rate": "95", "Respiratory Rate": "20", "Blood Pressure": "128/82", "O2 Sat": "97%" },
                    correct: "normal",
                    explanation: "Vitals are within normal ranges for pregnancy."
                }
            ],
            expert: [
                {
                    id: 1,
                    patient: "A 68-year-old male with CHF, increasing leg swelling, crackles on auscultation.",
                    vitals: { "Temperature": "98.3¬∞F", "Heart Rate": "120", "Respiratory Rate": "28", "Blood Pressure": "100/60", "O2 Sat": "89%" },
                    correct: "abnormal",
                    explanation: "Tachycardia, hypotension, tachypnea, and hypoxia point to acute decompensation."
                },
                {
                    id: 2,
                    patient: "A 30-year-old trauma patient, confused, pale, cool extremities.",
                    vitals: { "Temperature": "97.8¬∞F", "Heart Rate": "140", "Respiratory Rate": "30", "Blood Pressure": "78/50", "O2 Sat": "84%" },
                    correct: "abnormal",
                    explanation: "All findings are severely abnormal, consistent with shock."
                }
            ]
        };

        // Utility: shuffle array (for randomizing question order)
        function shuffle(arr) {
            return arr.map(a => [Math.random(), a]).sort((a, b) => a[0] - b[0]).map(a => a[1]);
        }

        // UI update functions
        function updateProgressOverview() {
            const data = ProgressTracker.data;
            document.getElementById("total-score").textContent = data.totalScore;
            document.getElementById("total-games").textContent = data.totalGames;
            document.getElementById("best-streak").textContent = data.bestStreak;
            document.getElementById("achievements-count").textContent = data.achievements.length;

            document.getElementById("beginner-progress").textContent = `${data.completedQuestions.beginner.length}/4`;
            document.getElementById("intermediate-progress").textContent = `${data.completedQuestions.intermediate.length}/3`;
            document.getElementById("expert-progress").textContent = `${data.completedQuestions.expert.length}/2`;

            document.getElementById("beginner-completion").textContent = `${data.completedQuestions.beginner.length}/4`;
            document.getElementById("intermediate-completion").textContent = `${data.completedQuestions.intermediate.length}/3`;
            document.getElementById("expert-completion").textContent = `${data.completedQuestions.expert.length}/2`;
        }

        function showAchievement(text) {
            const toast = document.getElementById("achievement-toast");
            document.getElementById("achievement-text").textContent = text;
            toast.classList.add("show");
            setTimeout(() => toast.classList.remove("show"), 3500);
        }

        // Game logic
        function startVitalsGame() {
            document.getElementById("home-screen").style.display = "none";
            document.getElementById("game-interface").style.display = "block";
            document.getElementById("difficulty-selection").style.display = "block";
            document.getElementById("game-content").style.display = "none";
            updateProgressOverview();
        }

        function backToHome() {
            document.getElementById("game-interface").style.display = "none";
            document.getElementById("home-screen").style.display = "block";
            updateProgressOverview();
        }

        function selectDifficulty(level) {
            gameState.selectedDifficulty = level;
            gameState.score = 0;
            gameState.streak = 0;
            gameState.currentQuestion = 0;

            // Get questions and exclude completed
            const completed = ProgressTracker.data.completedQuestions[level];
            let pool = questions[level].filter(q => !completed.includes(q.id));

            // If all completed, reset pool and allow replay
            if (pool.length === 0) pool = shuffle(questions[level]);
            else pool = shuffle(pool);

            gameState.questionPool = pool;
            document.getElementById("difficulty-selection").style.display = "none";
            document.getElementById("game-content").style.display = "block";
            loadQuestion();
            updateGameStats();
        }

        function loadQuestion() {
            const q = gameState.questionPool[gameState.currentQuestion];
            if (!q) {
                endGame();
                return;
            }
            document.getElementById("patient-description").textContent = q.patient;
            const vitalsDiv = document.getElementById("vital-signs");
            vitalsDiv.innerHTML = "";
            for (const [label, value] of Object.entries(q.vitals)) {
                vitalsDiv.innerHTML += `<div class="vital-sign"><div class="vital-label">${label}</div><div class="vital-value">${value}</div></div>`;
            }
            document.querySelectorAll(".answer-btn").forEach(btn => {
                btn.disabled = false;
                btn.classList.remove("correct", "incorrect");
            });
            document.getElementById("explanation").classList.remove("show");
            document.getElementById("explanation").textContent = "";
            document.getElementById("next-btn").classList.remove("show");
            gameState.currentCorrectAnswer = q.correct;
            updateGameStats();
        }

        function selectAnswer(selected) {
            document.querySelectorAll(".answer-btn").forEach(btn => btn.disabled = true);
            const correct = gameState.currentCorrectAnswer;
            const pool = gameState.questionPool;
            const q = pool[gameState.currentQuestion];

            if (selected === correct) {
                gameState.score += 5;
                gameState.streak += 1;
                document.querySelectorAll(".answer-btn")[selected === "normal" ? 0 : 1].classList.add("correct");
                ProgressTracker.update(data => {
                    data.totalScore += 5;
                    data.bestStreak = Math.max(data.bestStreak, gameState.streak);
                    data.difficultyStats[gameState.selectedDifficulty].streak = Math.max(data.difficultyStats[gameState.selectedDifficulty].streak, gameState.streak);
                    if (!data.completedQuestions[gameState.selectedDifficulty].includes(q.id)) {
                        data.completedQuestions[gameState.selectedDifficulty].push(q.id);
                    }
                });

                // Achievements (example)
                if (gameState.streak === 3 && !ProgressTracker.data.achievements.includes("3-streak")) {
                    ProgressTracker.update(data => { data.achievements.push("3-streak"); });
                    showAchievement("üî• 3 Correct Answers in a Row!");
                }
            } else {
                gameState.streak = 0;
                document.querySelectorAll(".answer-btn")[selected === "normal" ? 0 : 1].classList.add("incorrect");
            }
            document.getElementById("explanation").classList.add("show");
            document.getElementById("explanation").textContent = q.explanation;
            document.getElementById("next-btn").classList.add("show");
            updateProgressOverview();
            updateGameStats();
        }

        function nextQuestion() {
            gameState.currentQuestion += 1;
            if (gameState.currentQuestion < gameState.questionPool.length) {
                loadQuestion();
            } else {
                endGame();
            }
        }

        function endGame() {
            ProgressTracker.update(data => {
                data.totalGames += 1;
                data.difficultyStats[gameState.selectedDifficulty].played += 1;
                data.difficultyStats[gameState.selectedDifficulty].correct += gameState.score / 5;
            });
            updateProgressOverview();
            document.getElementById("game-content").innerHTML = `
                <div style="text-align:center;padding:2rem;">
                    <h2 style="margin-bottom:1rem;">Game Over!</h2>
                    <p style="font-size:1.3rem">Your Score: <b>${gameState.score}</b></p>
                    <p>Best Streak: <b>${gameState.streak}</b></p>
                    <button class="play-button" onclick="backToHome()">Return Home</button>
                </div>
            `;
        }

        function updateGameStats() {
            document.getElementById("score").textContent = gameState.score;
            document.getElementById("streak").textContent = gameState.streak;
            document.getElementById("question-num").textContent = gameState.currentQuestion + 1;
        }

        // Initialize
        updateProgressOverview();

        // Keyboard navigation (optional)
        document.addEventListener("keydown", e => {
            if (document.getElementById("game-interface").style.display === "block") {
                if (e.key === "1") selectAnswer("normal");
                if (e.key === "2") selectAnswer("abnormal");
                if (e.key === "Enter" && document.getElementById("next-btn").classList.contains("show")) nextQuestion();
            }
        });

    </script>
</body>
</html>
