<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReadyNurse - RN Gaming Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2D3748;
            --primary-light: #4A5568;
            --secondary: #38A169;
            --secondary-light: #48BB78;
            --accent: #ED8936;
            --accent-light: #F6AD55;
            --surface: #F7FAFC;
            --surface-elevated: #FFFFFF;
            --surface-accent: #EDF2F7;
            --text-primary: #1A202C;
            --text-secondary: #4A5568;
            --text-muted: #718096;
            --border: #E2E8F0;
            --border-focus: #CBD5E0;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-lg: rgba(0, 0, 0, 0.15);
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-warm: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background: var(--surface);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        }

        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 2rem 0;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.1"><polygon points="0,100 1000,100 1000,20 0,80"/></svg>');
            background-size: cover;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .logo {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, #fff 0%, #f0f8ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .logo::before {
            content:"";
            margin-right: 0;
            filter: none;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            letter-spacing: 0.01em;
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .welcome-section {
            text-align: center;
            margin-bottom: 4rem;
            padding: 3rem;
            background: var(--surface-elevated);
            border-radius: 24px;
            box-shadow: 0 8px 32px var(--shadow);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .welcome-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .welcome-section h1 {
            font-size: 3.2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.03em;
        }

        .welcome-section p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            font-weight: 400;
            line-height: 1.7;
        }

        .progress-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .progress-card {
            background: var(--surface-elevated);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 4px 20px var(--shadow);
            border: 1px solid var(--border);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .progress-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px var(--shadow-lg);
        }

        .progress-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .progress-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            background: var(--gradient-success);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .progress-label {
            font-size: 0.95rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
            margin-bottom: 3rem;
        }

        .game-card {
            background: var(--surface-elevated);
            border-radius: 24px;
            padding: 2.5rem;
            box-shadow: 0 8px 32px var(--shadow);
            border: 1px solid var(--border);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px var(--shadow-lg);
            border-color: var(--border-focus);
        }

        .game-card:hover::before {
            opacity: 0.03;
        }

        .game-card * {
            position: relative;
            z-index: 1;
        }

        .game-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            filter: drop-shadow(0 4px 8px var(--shadow));
        }

        .game-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .game-description {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .game-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--surface-accent);
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .play-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 16px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(245, 87, 108, 0.3);
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.01em;
        }

        .play-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 32px rgba(245, 87, 108, 0.4);
        }

        .play-button:active {
            transform: scale(0.98);
        }

        .coming-soon {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .coming-soon .play-button {
            background: var(--text-muted);
            cursor: not-allowed;
            box-shadow: none;
        }

        .coming-soon .play-button:hover {
            transform: none;
            box-shadow: none;
        }

        /* Game Interface */
        .game-interface {
            display: none;
            background: var(--surface-elevated);
            border-radius: 24px;
            padding: 3rem;
            box-shadow: 0 12px 48px var(--shadow-lg);
            border: 1px solid var(--border);
            text-align: center;
            position: relative;
        }

        .back-button {
            background: var(--text-muted);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 12px;
            cursor: pointer;
            margin-bottom: 2rem;
            font-weight: 500;
            transition: background 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .back-button:hover {
            background: var(--primary-light);
        }

        .difficulty-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 3rem 0;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            padding: 1.5rem 2.5rem;
            border: 2px solid var(--border);
            border-radius: 20px;
            background: var(--surface-elevated);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Inter', sans-serif;
            box-shadow: 0 4px 16px var(--shadow);
        }

        .difficulty-btn.beginner {
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .difficulty-btn.intermediate {
            border-color: var(--accent);
            color: var(--accent);
        }

        .difficulty-btn.expert {
            border-color: #E53E3E;
            color: #E53E3E;
        }

        .difficulty-btn.selected {
            transform: scale(1.08);
            box-shadow: 0 8px 32px var(--shadow-lg);
        }

        .difficulty-btn.beginner.selected {
            background: var(--secondary);
            color: white;
            box-shadow: 0 8px 32px rgba(56, 161, 105, 0.3);
        }

        .difficulty-btn.intermediate.selected {
            background: var(--accent);
            color: white;
            box-shadow: 0 8px 32px rgba(237, 137, 54, 0.3);
        }

        .difficulty-btn.expert.selected {
            background: #E53E3E;
            color: white;
            box-shadow: 0 8px 32px rgba(229, 62, 62, 0.3);
        }

        .game-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 3rem 0;
            padding: 2rem;
            background: var(--surface-accent);
            border-radius: 20px;
            border: 1px solid var(--border);
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.95rem;
            color: var(--text-muted);
            font-weight: 500;
            letter-spacing: 0.02em;
        }

        .question-container {
            background: var(--surface);
            padding: 3rem;
            border-radius: 20px;
            margin: 3rem 0;
            text-align: left;
            border: 1px solid var(--border);
            box-shadow: 0 4px 20px var(--shadow);
        }

        .patient-info {
            background: var(--surface-elevated);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--secondary);
            box-shadow: 0 2px 12px var(--shadow);
        }

        .patient-info h3 {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .vital-signs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .vital-sign {
            background: var(--surface-elevated);
            padding: 1.5rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 4px 16px var(--shadow);
            border: 1px solid var(--border);
            transition: transform 0.2s ease;
        }

        .vital-sign:hover {
            transform: translateY(-2px);
        }

        .vital-label {
            font-weight: 600;
            color: var(--secondary);
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .vital-value {
            font-size: 1.4rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
        }

        .answer-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 3rem 0;
        }

        .answer-btn {
            padding: 2rem;
            border: 2px solid var(--border);
            border-radius: 20px;
            background: var(--surface-elevated);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            font-family: 'Inter', sans-serif;
            box-shadow: 0 4px 16px var(--shadow);
        }

        .answer-btn:hover {
            border-color: var(--secondary);
            background: var(--surface);
            transform: translateY(-2px);
            box-shadow: 0 8px 32px var(--shadow-lg);
        }

        .answer-btn.correct {
            background: var(--gradient-success);
            border-color: var(--secondary);
            color: white;
            box-shadow: 0 8px 32px rgba(56, 161, 105, 0.3);
        }

        .answer-btn.incorrect {
            background: var(--gradient-secondary);
            border-color: #E53E3E;
            color: white;
            box-shadow: 0 8px 32px rgba(229, 62, 62, 0.3);
        }

        .answer-btn:disabled {
            cursor: not-allowed;
        }

        .explanation {
            background: var(--gradient-warm);
            background-size: 100% 100%;
            color: white;
            border-radius: 16px;
            padding: 2rem;
            margin-top: 2rem;
            display: none;
            box-shadow: 0 8px 32px rgba(250, 112, 154, 0.2);
        }

        .explanation.show {
            display: block;
            animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .next-question {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: none;
            margin: 3rem auto;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
            font-family: 'Inter', sans-serif;
        }

        .next-question:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 40px rgba(102, 126, 234, 0.4);
        }

        .next-question.show {
            display: block;
        }

        .achievement-toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--gradient-success);
            color: white;
            padding: 1.5rem 2rem;
            border-radius: 16px;
            box-shadow: 0 8px 32px var(--shadow-lg);
            display: none;
            z-index: 1000;
            font-weight: 600;
            max-width: 350px;
        }

        .achievement-toast.show {
            display: block;
            animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideInRight {
            from { 
                opacity: 0; 
                transform: translateX(100%); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 0 1rem;
            }
            
            .main-content {
                padding: 2rem 1rem;
            }

            .logo {
                font-size: 2.2rem;
            }

            .welcome-section h1 {
                font-size: 2.4rem;
            }

            .games-grid {
                grid-template-columns: 1fr;
            }
            
            .difficulty-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .answer-buttons {
                grid-template-columns: 1fr;
            }
            
            .game-stats {
                gap: 2rem;
                flex-wrap: wrap;
            }

            .progress-overview {
                grid-template-columns: repeat(2, 1fr);
            }

            .achievement-toast {
                top: 1rem;
                right: 1rem;
                left: 1rem;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .progress-overview {
                grid-template-columns: 1fr;
            }
        }
</style>
</head>
<body>
   <header class="header">
    <div class="header-content">
        <div style="display:flex; align-items:center; gap:0.5rem;">
            <!-- Line-art book + stethoscope logo -->
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 64 64" stroke="currentColor" fill="none" stroke-width="2">
                <!-- Book -->
                <rect x="8" y="12" width="32" height="40" rx="2" ry="2"/>
                <line x1="24" y1="12" x2="24" y2="52"/>
                <!-- Stethoscope -->
                <circle cx="50" cy="20" r="6"/>
                <line x1="50" y1="26" x2="42" y2="36"/>
                <line x1="42" y1="36" x2="42" y2="46"/>
                <line x1="42" y1="46" x2="38" y2="46"/>
            </svg>

            <!-- Logo text -->
            <div class="logo" style="color:#1e3a8a; font-weight:bold; font-size:1.5rem;">
                ReadyNurse
            </div>
        </div>

        <div class="tagline">RN Gaming Hub - Learn, Play, Excel</div>
    </div>
</header>

    <main class="main-content">
        <!-- Home Screen -->
        <div id="home-screen">
            <section class="welcome-section">
                <h1>Welcome to ReadyNurse</h1>
                <p>Master nursing skills through interactive games designed for nursing students. Challenge yourself, track your progress, and have fun while learning! 
                    (Made by a bored nursing student xoxo)</p>
            </section>

            <!-- Progress Overview -->
            <div class="progress-overview" id="progress-overview">
                <div class="progress-card">
                    <div class="progress-icon">📈</div>
                    <div class="progress-value" id="total-score">0</div>
                    <div class="progress-label">Total Score</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">🎯</div>
                    <div class="progress-value" id="total-games">0</div>
                    <div class="progress-label">Games Played</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">🔥</div>
                    <div class="progress-value" id="best-streak">0</div>
                    <div class="progress-label">Best Streak</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">🏆</div>
                    <div class="progress-value" id="achievements-count">0</div>
                    <div class="progress-label">Achievements</div>
                </div>
            </div>

            <div class="games-grid">
                <div class="game-card">
                    <div class="game-icon">🩺</div>
                    <h3 class="game-title">Vital Signs Detective</h3>
                    <p class="game-description">Analyze patient vital signs and identify normal vs abnormal readings. Test your clinical assessment skills!</p>
                    <div class="game-progress">
                        <span>Beginner: <span id="beginner-progress">0/4</span></span>
                        <span>Intermediate: <span id="intermediate-progress">0/3</span></span>
                        <span>Expert: <span id="expert-progress">0/2</span></span>
                    </div>
                    <button class="play-button" onclick="startVitalsGame()">Play Now</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">💊</div>
                    <h3 class="game-title">Medication Math Challenge</h3>
                    <p class="game-description">Master dosage calculations and medication administration. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">🫀</div>
                    <h3 class="game-title">Anatomy Quick Match</h3>
                    <p class="game-description">Match anatomical terms with their definitions and locations. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">🚑</div>
                    <h3 class="game-title">Emergency Triage</h3>
                    <p class="game-description">Practice patient prioritization in emergency situations. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>
            </div>
        </div>

        <!-- Game Interface -->
        <div id="game-interface" class="game-interface">
            <button class="back-button" onclick="backToHome()">← Back to Games</button>
            
            <div id="difficulty-selection">
                <h2>Choose Your Challenge Level</h2>
                <p>Select the difficulty that matches your experience level</p>
                <div class="difficulty-buttons">
                    <button class="difficulty-btn beginner" onclick="selectDifficulty('beginner')">
                        🌱 Beginner<br><small>Basic vital signs (<span id="beginner-completion">0/4</span> completed)</small>
                    </button>
                    <button class="difficulty-btn intermediate" onclick="selectDifficulty('intermediate')">
                        🎯 Intermediate<br><small>Clinical scenarios (<span id="intermediate-completion">0/3</span> completed)</small>
                    </button>
                    <button class="difficulty-btn expert" onclick="selectDifficulty('expert')">
                        🔥 Expert<br><small>Complex cases (<span id="expert-completion">0/2</span> completed)</small>
                    </button>
                </div>
            </div>

            <div id="game-content" style="display: none;">
                <div class="game-stats">
                    <div class="stat">
                        <div class="stat-value" id="score">0</div>
                        <div class="stat-label">Score</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="streak">0</div>
                        <div class="stat-label">Streak</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="question-num">1</div>
                        <div class="stat-label">Question</div>
                    </div>
                </div>

                <div class="question-container">
                    <div class="patient-info">
                        <h3>Patient Assessment</h3>
                        <p id="patient-description">Loading patient information...</p>
                    </div>

                    <div class="vital-signs" id="vital-signs">
                        <!-- Vital signs will be loaded here -->
                    </div>

                    <h4 style="margin-bottom: 2rem; text-align: center; font-size: 1.3rem; font-weight: 600;">What is your assessment?</h4>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('normal')">
                            ✅ Normal Vital Signs<br>
                            <small>Within expected ranges</small>
                        </button>
                        <button class="answer-btn" onclick="selectAnswer('abnormal')">
                            ⚠️ Abnormal Vital Signs<br>
                            <small>Requires attention</small>
                        </button>
                    </div>

                    <div class="explanation" id="explanation">
                        <!-- Explanation will appear here -->
                    </div>
                    <button class="next-question" id="next-btn" onclick="nextQuestion()">Next Question</button>
                </div>
            </div>
        </div>

        <!-- Achievement Toast -->
        <div id="achievement-toast" class="achievement-toast">
            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">🏆</div>
            <div id="achievement-text">Achievement Unlocked!</div>
        </div>
    </main>

    <script>
        // --- GAME DATA AND QUESTIONS ---
        const vitalSignQuestions = {
            beginner: [
                {
                    id: 1,
                    description: "A 22-year-old healthy college student comes for a routine check-up.",
                    vitals: {
                        temp: "37.0°C (98.6°F)",
                        hr: "72 bpm",
                        bp: "120/78 mmHg",
                        rr: "16 breaths/min",
                        spo2: "99%"
                    },
                    correctAnswer: "normal",
                    explanation: "All vital signs are within normal limits for a healthy young adult."
                },
                {
                    id: 2,
                    description: "A 68-year-old patient admitted with dehydration. Assessing current vitals.",
                    vitals: {
                        temp: "37.5°C (99.5°F)",
                        hr: "105 bpm",
                        bp: "100/60 mmHg",
                        rr: "22 breaths/min",
                        spo2: "95%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Heart rate (tachycardia), blood pressure (hypotension), and respiratory rate (tachypnea) are abnormal, consistent with dehydration. SpO2 is slightly low."
                },
                {
                    id: 3,
                    description: "A 35-year-old patient 2 hours post-appendectomy. Pain is controlled.",
                    vitals: {
                        temp: "37.2°C (99.0°F)",
                        hr: "88 bpm",
                        bp: "118/76 mmHg",
                        rr: "18 breaths/min",
                        spo2: "98%"
                    },
                    correctAnswer: "normal",
                    explanation: "Vital signs are stable and within expected post-operative ranges given controlled pain. Mild elevation in HR is common post-op."
                },
                {
                    id: 4,
                    description: "A 7-year-old child with a sudden onset of fever and malaise.",
                    vitals: {
                        temp: "39.1°C (102.4°F)",
                        hr: "130 bpm",
                        bp: "105/68 mmHg",
                        rr: "28 breaths/min",
                        spo2: "97%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Fever and tachycardia are abnormal for a young child, suggesting infection. Respiratory rate is also elevated for age."
                }
            ],
            intermediate: [
                {
                    id: 1,
                    description: "A 50-year-old with history of hypertension presents for a follow-up.",
                    vitals: {
                        temp: "36.8°C (98.2°F)",
                        hr: "80 bpm",
                        bp: "145/92 mmHg",
                        rr: "16 breaths/min",
                        spo2: "98%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Blood pressure is elevated (hypertension), but other vital signs are normal."
                },
                {
                    id: 2,
                    description: "A 28-year-old marathon runner just finished a race.",
                    vitals: {
                        temp: "38.0°C (100.4°F)",
                        hr: "112 bpm",
                        bp: "118/74 mmHg",
                        rr: "22 breaths/min",
                        spo2: "99%"
                    },
                    correctAnswer: "normal",
                    explanation: "Transient vital sign changes after strenuous exercise are expected and considered normal here."
                },
                {
                    id: 3,
                    description: "A 75-year-old with COPD in the ED for shortness of breath.",
                    vitals: {
                        temp: "37.1°C (98.8°F)",
                        hr: "94 bpm",
                        bp: "132/78 mmHg",
                        rr: "30 breaths/min",
                        spo2: "88%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "SpO2 is low (88%) and respiratory rate is elevated, which is abnormal for most patients, but may be 'baseline' for some with severe COPD."
                }
            ],
            expert: [
                {
                    id: 1,
                    description: "A 60-year-old male in the ICU post-cardiac surgery.",
                    vitals: {
                        temp: "35.2°C (95.4°F)",
                        hr: "54 bpm",
                        bp: "85/48 mmHg",
                        rr: "10 breaths/min",
                        spo2: "96%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Bradycardia, hypotension, hypothermia, and bradypnea: all abnormal, concerning for shock or complication."
                },
                {
                    id: 2,
                    description: "A 9-year-old child at a well checkup.",
                    vitals: {
                        temp: "36.9°C (98.4°F)",
                        hr: "88 bpm",
                        bp: "108/70 mmHg",
                        rr: "18 breaths/min",
                        spo2: "100%"
                    },
                    correctAnswer: "normal",
                    explanation: "All vital signs are within normal limits for a school-aged child."
                }
            ]
        };

        // --- GLOBAL STATE ---
        let currentDifficulty = null;
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let streak = 0;
        let bestStreak = 0;
        let gamesPlayed = 0;
        let achievements = [];
        let completion = {
            beginner: 0,
            intermediate: 0,
            expert: 0
        };

        // --- DOM ELEMENTS ---
        const homeScreen = document.getElementById('home-screen');
        const gameInterface = document.getElementById('game-interface');
        const difficultySelection = document.getElementById('difficulty-selection');
        const gameContent = document.getElementById('game-content');
        const patientDescription = document.getElementById('patient-description');
        const vitalSignsDiv = document.getElementById('vital-signs');
        const explanationDiv = document.getElementById('explanation');
        const nextBtn = document.getElementById('next-btn');
        const scoreEl = document.getElementById('score');
        const streakEl = document.getElementById('streak');
        const questionNumEl = document.getElementById('question-num');
        const achievementToast = document.getElementById('achievement-toast');
        const achievementText = document.getElementById('achievement-text');

        // Progress Elements
        const totalScoreEl = document.getElementById('total-score');
        const totalGamesEl = document.getElementById('total-games');
        const bestStreakEl = document.getElementById('best-streak');
        const achievementsCountEl = document.getElementById('achievements-count');
        const beginnerProgressEl = document.getElementById('beginner-progress');
        const intermediateProgressEl = document.getElementById('intermediate-progress');
        const expertProgressEl = document.getElementById('expert-progress');
        const beginnerCompletionEl = document.getElementById('beginner-completion');
        const intermediateCompletionEl = document.getElementById('intermediate-completion');
        const expertCompletionEl = document.getElementById('expert-completion');

        // --- GAME FLOW FUNCTIONS ---

        function startVitalsGame() {
            homeScreen.style.display = 'none';
            gameInterface.style.display = 'block';
            difficultySelection.style.display = 'block';
            gameContent.style.display = 'none';
        }

        function backToHome() {
            gameInterface.style.display = 'none';
            homeScreen.style.display = 'block';
            // Reset selection highlights
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('selected'));
        }

        function selectDifficulty(difficulty) {
            currentDifficulty = difficulty;
            questions = [...vitalSignQuestions[difficulty]];
            currentQuestionIndex = 0;
            score = 0;
            streak = 0;
            updateStats();

            // highlight selected button
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelector(`.difficulty-btn.${difficulty}`).classList.add('selected');

            difficultySelection.style.display = 'none';
            gameContent.style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            if (!questions[currentQuestionIndex]) {
                endGame();
                return;
            }
            const q = questions[currentQuestionIndex];
            patientDescription.textContent = q.description;

            // Vital signs
            vitalSignsDiv.innerHTML = '';
            for (const [label, value] of Object.entries(q.vitals)) {
                const vsDiv = document.createElement('div');
                vsDiv.className = 'vital-sign';
                vsDiv.innerHTML = `<div class="vital-label">${label.toUpperCase()}</div><div class="vital-value">${value}</div>`;
                vitalSignsDiv.appendChild(vsDiv);
            }

            // Reset answer buttons, explanation, next button
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('correct', 'incorrect');
            });
            explanationDiv.textContent = '';
            explanationDiv.classList.remove('show');
            nextBtn.classList.remove('show');
            
            updateStats();
        }

        function selectAnswer(answer) {
            const q = questions[currentQuestionIndex];
            const correct = (answer === q.correctAnswer);

            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.disabled = true;
                if (btn.innerText.includes('Normal') && q.correctAnswer === 'normal') {
                    btn.classList.add('correct');
                } else if (btn.innerText.includes('Abnormal') && q.correctAnswer === 'abnormal') {
                    btn.classList.add('correct');
                } else {
                    btn.classList.add('incorrect');
                }
            });

            explanationDiv.textContent = q.explanation;
            explanationDiv.classList.add('show');
            nextBtn.classList.add('show');

            if (correct) {
                score += 10;
                streak += 1;
                if (streak > bestStreak) bestStreak = streak;
                completion[currentDifficulty] = Math.max(completion[currentDifficulty], currentQuestionIndex + 1);
                maybeUnlockAchievement();
            } else {
                streak = 0;
            }
            updateStats();
        }

        function nextQuestion() {
            currentQuestionIndex += 1;
            if (currentQuestionIndex >= questions.length) {
                endGame();
            } else {
                showQuestion();
            }
        }

        function updateStats() {
            scoreEl.textContent = score;
            streakEl.textContent = streak;
            questionNumEl.textContent = (currentQuestionIndex + 1);

            // Progress on home screen
            totalScoreEl.textContent = parseInt(totalScoreEl.textContent) + 0; // Keep as is for now
            totalGamesEl.textContent = gamesPlayed;
            bestStreakEl.textContent = bestStreak;
            achievementsCountEl.textContent = achievements.length;

            beginnerProgressEl.textContent = completion.beginner + "/4";
            intermediateProgressEl.textContent = completion.intermediate + "/3";
            expertProgressEl.textContent = completion.expert + "/2";
            beginnerCompletionEl.textContent = completion.beginner + "/4";
            intermediateCompletionEl.textContent = completion.intermediate + "/3";
            expertCompletionEl.textContent = completion.expert + "/2";
        }

        function endGame() {
            gamesPlayed += 1;
            totalGamesEl.textContent = gamesPlayed;
            totalScoreEl.textContent = parseInt(totalScoreEl.textContent) + score;
            bestStreakEl.textContent = bestStreak;
            achievementsCountEl.textContent = achievements.length;

            // Reset UI and show difficulty selection
            difficultySelection.style.display = 'block';
            gameContent.style.display = 'none';
            showAchievement("Game Complete! Score: " + score);

            // Update progress bars
            updateStats();
        }

        function maybeUnlockAchievement() {
            // Example: unlock for perfect score
            if (
                completion.beginner === 4 &&
                completion.intermediate === 3 &&
                completion.expert === 2 &&
                !achievements.includes('AllClear')
            ) {
                achievements.push('AllClear');
                showAchievement("All levels completed!");
            }
        }

        function showAchievement(text) {
            achievementText.textContent = text;
            achievementToast.classList.add('show');
            setTimeout(() => {
                achievementToast.classList.remove('show');
            }, 2500);
        }

        // --- INIT ---
        // On page load, update progress bars
        updateStats();

        // Optional: allow Enter key for "Next Question"
        document.addEventListener('keydown', function(e) {
            if (gameInterface.style.display === 'block' && nextBtn.classList.contains('show') && (e.key === 'Enter' || e.key === ' ')) {
                nextBtn.click();
            }
        });
        function playGame(game) {
  if (game === 'vital-signs') {
    startQuiz(vitalSignQuestions.beginner);
  } else {
    alert("Game not ready yet: " + game);
  }
}
    </script>
</body>
</html>
