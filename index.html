<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReadyNurse - RN Gaming Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* --- COPY THE CSS FROM YOUR EXISTING FILE HERE --- */
        /* (For brevity, keep your original CSS as is) */
        /* ... (CSS unchanged, not shown here due to length) ... */
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">ReadyNurse</div>
            <div class="tagline">RN Gaming Hub - Learn, Play, Excel</div>
        </div>
    </header>

    <main class="main-content">
        <!-- Home Screen -->
        <div id="home-screen">
            <section class="welcome-section">
                <h1>Welcome to ReadyNurse</h1>
                <p>Master nursing skills through interactive games designed for RNs, students, and professionals. Challenge yourself, track your progress, and have fun while learning! (By a bored nursing student)</p>
            </section>

            <!-- Progress Overview -->
            <div class="progress-overview" id="progress-overview">
                <div class="progress-card">
                    <div class="progress-icon">üìà</div>
                    <div class="progress-value" id="total-score">0</div>
                    <div class="progress-label">Total Score</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">üéØ</div>
                    <div class="progress-value" id="total-games">0</div>
                    <div class="progress-label">Games Played</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">üî•</div>
                    <div class="progress-value" id="best-streak">0</div>
                    <div class="progress-label">Best Streak</div>
                </div>
                <div class="progress-card">
                    <div class="progress-icon">üèÜ</div>
                    <div class="progress-value" id="achievements-count">0</div>
                    <div class="progress-label">Achievements</div>
                </div>
            </div>

            <div class="games-grid">
                <div class="game-card"
                    <div class="game-icon">ü©∫</div>
                    <h3 class="game-title">Vital Signs Detective</h3>
                    <p class="game-description">Analyze patient vital signs and identify normal vs abnormal readings. Test your clinical assessment skills!</p>
                    <div class="game-progress">
                        <span>Beginner: <span id="beginner-progress">0/4</span></span>
                        <span>Intermediate: <span id="intermediate-progress">0/3</span></span>
                        <span>Expert: <span id="expert-progress">0/2</span></span>
                    </div>
                    <button class="play-button" onclick="startVitalsGame()">Play Now</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">üíä</div>
                    <h3 class="game-title">Medication Math Challenge</h3>
                    <p class="game-description">Master dosage calculations and medication administration. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">ü´Ä</div>
                    <h3 class="game-title">Anatomy Quick Match</h3>
                    <p class="game-description">Match anatomical terms with their definitions and locations. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>

                <div class="game-card coming-soon">
                    <div class="game-icon">üöë</div>
                    <h3 class="game-title">Emergency Triage</h3>
                    <p class="game-description">Practice patient prioritization in emergency situations. Coming soon!</p>
                    <div class="game-progress">
                        <span>Progress: 0%</span>
                    </div>
                    <button class="play-button">Coming Soon</button>
                </div>
            </div>
        </div>

        <!-- Game Interface -->
        <div id="game-interface" class="game-interface">
            <button class="back-button" onclick="backToHome()">‚Üê Back to Games</button>
            
            <div id="difficulty-selection">
                <h2>Choose Your Challenge Level</h2>
                <p>Select the difficulty that matches your experience level</p>
                <div class="difficulty-buttons">
                    <button class="difficulty-btn beginner" onclick="selectDifficulty('beginner')">
                        üå± Beginner<br><small>Basic vital signs (<span id="beginner-completion">0/4</span> completed)</small>
                    </button>
                    <button class="difficulty-btn intermediate" onclick="selectDifficulty('intermediate')">
                        üéØ Intermediate<br><small>Clinical scenarios (<span id="intermediate-completion">0/3</span> completed)</small>
                    </button>
                    <button class="difficulty-btn expert" onclick="selectDifficulty('expert')">
                        üî• Expert<br><small>Complex cases (<span id="expert-completion">0/2</span> completed)</small>
                    </button>
                </div>
            </div>

            <div id="game-content" style="display: none;">
                <div class="game-stats">
                    <div class="stat">
                        <div class="stat-value" id="score">0</div>
                        <div class="stat-label">Score</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="streak">0</div>
                        <div class="stat-label">Streak</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="question-num">1</div>
                        <div class="stat-label">Question</div>
                    </div>
                </div>

                <div class="question-container">
                    <div class="patient-info">
                        <h3>Patient Assessment</h3>
                        <p id="patient-description">Loading patient information...</p>
                    </div>

                    <div class="vital-signs" id="vital-signs">
                        <!-- Vital signs will be loaded here -->
                    </div>

                    <h4 style="margin-bottom: 2rem; text-align: center; font-size: 1.3rem; font-weight: 600;">What is your assessment?</h4>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('normal')">
                            ‚úÖ Normal Vital Signs<br>
                            <small>Within expected ranges</small>
                        </button>
                        <button class="answer-btn" onclick="selectAnswer('abnormal')">
                            ‚ö†Ô∏è Abnormal Vital Signs<br>
                            <small>Requires attention</small>
                        </button>
                    </div>

                    <div class="explanation" id="explanation">
                        <!-- Explanation will appear here -->
                    </div>
                    <button class="next-question" id="next-btn" onclick="nextQuestion()">Next Question</button>
                </div>
            </div>
        </div>

        <!-- Achievement Toast -->
        <div id="achievement-toast" class="achievement-toast">
            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üèÜ</div>
            <div id="achievement-text">Achievement Unlocked!</div>
        </div>
    </main>

    <script>
        // --- GAME DATA AND QUESTIONS ---
        const vitalSignQuestions = {
            beginner: [
                {
                    id: 1,
                    description: "A 22-year-old healthy college student comes for a routine check-up.",
                    vitals: {
                        temp: "37.0¬∞C (98.6¬∞F)",
                        hr: "72 bpm",
                        bp: "120/78 mmHg",
                        rr: "16 breaths/min",
                        spo2: "99%"
                    },
                    correctAnswer: "normal",
                    explanation: "All vital signs are within normal limits for a healthy young adult."
                },
                {
                    id: 2,
                    description: "A 68-year-old patient admitted with dehydration. Assessing current vitals.",
                    vitals: {
                        temp: "37.5¬∞C (99.5¬∞F)",
                        hr: "105 bpm",
                        bp: "100/60 mmHg",
                        rr: "22 breaths/min",
                        spo2: "95%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Heart rate (tachycardia), blood pressure (hypotension), and respiratory rate (tachypnea) are abnormal, consistent with dehydration. SpO2 is slightly low."
                },
                {
                    id: 3,
                    description: "A 35-year-old patient 2 hours post-appendectomy. Pain is controlled.",
                    vitals: {
                        temp: "37.2¬∞C (99.0¬∞F)",
                        hr: "88 bpm",
                        bp: "118/76 mmHg",
                        rr: "18 breaths/min",
                        spo2: "98%"
                    },
                    correctAnswer: "normal",
                    explanation: "Vital signs are stable and within expected post-operative ranges given controlled pain. Mild elevation in HR is common post-op."
                },
                {
                    id: 4,
                    description: "A 7-year-old child with a sudden onset of fever and malaise.",
                    vitals: {
                        temp: "39.1¬∞C (102.4¬∞F)",
                        hr: "130 bpm",
                        bp: "105/68 mmHg",
                        rr: "28 breaths/min",
                        spo2: "97%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Fever and tachycardia are abnormal for a young child, suggesting infection. Respiratory rate is also elevated for age."
                }
            ],
            intermediate: [
                {
                    id: 1,
                    description: "A 50-year-old with history of hypertension presents for a follow-up.",
                    vitals: {
                        temp: "36.8¬∞C (98.2¬∞F)",
                        hr: "80 bpm",
                        bp: "145/92 mmHg",
                        rr: "16 breaths/min",
                        spo2: "98%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Blood pressure is elevated (hypertension), but other vital signs are normal."
                },
                {
                    id: 2,
                    description: "A 28-year-old marathon runner just finished a race.",
                    vitals: {
                        temp: "38.0¬∞C (100.4¬∞F)",
                        hr: "112 bpm",
                        bp: "118/74 mmHg",
                        rr: "22 breaths/min",
                        spo2: "99%"
                    },
                    correctAnswer: "normal",
                    explanation: "Transient vital sign changes after strenuous exercise are expected and considered normal here."
                },
                {
                    id: 3,
                    description: "A 75-year-old with COPD in the ED for shortness of breath.",
                    vitals: {
                        temp: "37.1¬∞C (98.8¬∞F)",
                        hr: "94 bpm",
                        bp: "132/78 mmHg",
                        rr: "30 breaths/min",
                        spo2: "88%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "SpO2 is low (88%) and respiratory rate is elevated, which is abnormal for most patients, but may be 'baseline' for some with severe COPD."
                }
            ],
            expert: [
                {
                    id: 1,
                    description: "A 60-year-old male in the ICU post-cardiac surgery.",
                    vitals: {
                        temp: "35.2¬∞C (95.4¬∞F)",
                        hr: "54 bpm",
                        bp: "85/48 mmHg",
                        rr: "10 breaths/min",
                        spo2: "96%"
                    },
                    correctAnswer: "abnormal",
                    explanation: "Bradycardia, hypotension, hypothermia, and bradypnea: all abnormal, concerning for shock or complication."
                },
                {
                    id: 2,
                    description: "A 9-year-old child at a well checkup.",
                    vitals: {
                        temp: "36.9¬∞C (98.4¬∞F)",
                        hr: "88 bpm",
                        bp: "108/70 mmHg",
                        rr: "18 breaths/min",
                        spo2: "100%"
                    },
                    correctAnswer: "normal",
                    explanation: "All vital signs are within normal limits for a school-aged child."
                }
            ]
        };

        // --- GLOBAL STATE ---
        let currentDifficulty = null;
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let streak = 0;
        let bestStreak = 0;
        let gamesPlayed = 0;
        let achievements = [];
        let completion = {
            beginner: 0,
            intermediate: 0,
            expert: 0
        };

        // --- DOM ELEMENTS ---
        const homeScreen = document.getElementById('home-screen');
        const gameInterface = document.getElementById('game-interface');
        const difficultySelection = document.getElementById('difficulty-selection');
        const gameContent = document.getElementById('game-content');
        const patientDescription = document.getElementById('patient-description');
        const vitalSignsDiv = document.getElementById('vital-signs');
        const explanationDiv = document.getElementById('explanation');
        const nextBtn = document.getElementById('next-btn');
        const scoreEl = document.getElementById('score');
        const streakEl = document.getElementById('streak');
        const questionNumEl = document.getElementById('question-num');
        const achievementToast = document.getElementById('achievement-toast');
        const achievementText = document.getElementById('achievement-text');

        // Progress Elements
        const totalScoreEl = document.getElementById('total-score');
        const totalGamesEl = document.getElementById('total-games');
        const bestStreakEl = document.getElementById('best-streak');
        const achievementsCountEl = document.getElementById('achievements-count');
        const beginnerProgressEl = document.getElementById('beginner-progress');
        const intermediateProgressEl = document.getElementById('intermediate-progress');
        const expertProgressEl = document.getElementById('expert-progress');
        const beginnerCompletionEl = document.getElementById('beginner-completion');
        const intermediateCompletionEl = document.getElementById('intermediate-completion');
        const expertCompletionEl = document.getElementById('expert-completion');

        // --- GAME FLOW FUNCTIONS ---

        function startVitalsGame() {
            homeScreen.style.display = 'none';
            gameInterface.style.display = 'block';
            difficultySelection.style.display = 'block';
            gameContent.style.display = 'none';
        }

        function backToHome() {
            gameInterface.style.display = 'none';
            homeScreen.style.display = 'block';
            // Reset selection highlights
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('selected'));
        }

        function selectDifficulty(difficulty) {
            currentDifficulty = difficulty;
            questions = [...vitalSignQuestions[difficulty]];
            currentQuestionIndex = 0;
            score = 0;
            streak = 0;
            updateStats();

            // highlight selected button
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelector(`.difficulty-btn.${difficulty}`).classList.add('selected');

            difficultySelection.style.display = 'none';
            gameContent.style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            if (!questions[currentQuestionIndex]) {
                endGame();
                return;
            }
            const q = questions[currentQuestionIndex];
            patientDescription.textContent = q.description;

            // Vital signs
            vitalSignsDiv.innerHTML = '';
            for (const [label, value] of Object.entries(q.vitals)) {
                const vsDiv = document.createElement('div');
                vsDiv.className = 'vital-sign';
                vsDiv.innerHTML = `<div class="vital-label">${label.toUpperCase()}</div><div class="vital-value">${value}</div>`;
                vitalSignsDiv.appendChild(vsDiv);
            }

            // Reset answer buttons, explanation, next button
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('correct', 'incorrect');
            });
            explanationDiv.textContent = '';
            explanationDiv.classList.remove('show');
            nextBtn.classList.remove('show');
            
            updateStats();
        }

        function selectAnswer(answer) {
            const q = questions[currentQuestionIndex];
            const correct = (answer === q.correctAnswer);

            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.disabled = true;
                if (btn.innerText.includes('Normal') && q.correctAnswer === 'normal') {
                    btn.classList.add('correct');
                } else if (btn.innerText.includes('Abnormal') && q.correctAnswer === 'abnormal') {
                    btn.classList.add('correct');
                } else {
                    btn.classList.add('incorrect');
                }
            });

            explanationDiv.textContent = q.explanation;
            explanationDiv.classList.add('show');
            nextBtn.classList.add('show');

            if (correct) {
                score += 10;
                streak += 1;
                if (streak > bestStreak) bestStreak = streak;
                completion[currentDifficulty] = Math.max(completion[currentDifficulty], currentQuestionIndex + 1);
                maybeUnlockAchievement();
            } else {
                streak = 0;
            }
            updateStats();
        }

        function nextQuestion() {
            currentQuestionIndex += 1;
            if (currentQuestionIndex >= questions.length) {
                endGame();
            } else {
                showQuestion();
            }
        }

        function updateStats() {
            scoreEl.textContent = score;
            streakEl.textContent = streak;
            questionNumEl.textContent = (currentQuestionIndex + 1);

            // Progress on home screen
            totalScoreEl.textContent = parseInt(totalScoreEl.textContent) + 0; // Keep as is for now
            totalGamesEl.textContent = gamesPlayed;
            bestStreakEl.textContent = bestStreak;
            achievementsCountEl.textContent = achievements.length;

            beginnerProgressEl.textContent = completion.beginner + "/4";
            intermediateProgressEl.textContent = completion.intermediate + "/3";
            expertProgressEl.textContent = completion.expert + "/2";
            beginnerCompletionEl.textContent = completion.beginner + "/4";
            intermediateCompletionEl.textContent = completion.intermediate + "/3";
            expertCompletionEl.textContent = completion.expert + "/2";
        }

        function endGame() {
            gamesPlayed += 1;
            totalGamesEl.textContent = gamesPlayed;
            totalScoreEl.textContent = parseInt(totalScoreEl.textContent) + score;
            bestStreakEl.textContent = bestStreak;
            achievementsCountEl.textContent = achievements.length;

            // Reset UI and show difficulty selection
            difficultySelection.style.display = 'block';
            gameContent.style.display = 'none';
            showAchievement("Game Complete! Score: " + score);

            // Update progress bars
            updateStats();
        }

        function maybeUnlockAchievement() {
            // Example: unlock for perfect score
            if (
                completion.beginner === 4 &&
                completion.intermediate === 3 &&
                completion.expert === 2 &&
                !achievements.includes('AllClear')
            ) {
                achievements.push('AllClear');
                showAchievement("All levels completed!");
            }
        }

        function showAchievement(text) {
            achievementText.textContent = text;
            achievementToast.classList.add('show');
            setTimeout(() => {
                achievementToast.classList.remove('show');
            }, 2500);
        }

        // --- INIT ---
        // On page load, update progress bars
        updateStats();

        // Optional: allow Enter key for "Next Question"
        document.addEventListener('keydown', function(e) {
            if (gameInterface.style.display === 'block' && nextBtn.classList.contains('show') && (e.key === 'Enter' || e.key === ' ')) {
                nextBtn.click();
            }
        });
    </script>
</body>
</html>
